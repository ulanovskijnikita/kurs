<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="../../../favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="../../css/output.css">
    <title>Sing-up</title>
</head>
<body class="block">
    <header class="grid items-center grid-cols-3 desktop:grid-cols-12 justify-between ">
        <div class="col-span-1 desktop:col-span-5 link font-bold justify-center desktop:justify-start">
            <a href="../../../index.html" class="flex items-center gap-5 active:text-accent">
                <svg class="fill-current w-25 h-25 tablet:w-30 tablet:h-30 desktop:w-33 desktop:h-33" width="50"
                    height="50" viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M12.5 0H18.75C20.4785 0 21.875 1.39648 21.875 3.125V12.5H9.375V3.125C9.375 1.39648 10.7715 0 12.5 0ZM0 25C0 19.8242 4.19922 15.625 9.375 15.625H21.875C27.0508 15.625 31.25 19.8242 31.25 25V45.3125C31.25 47.9004 29.1504 50 26.5625 50H4.6875C2.09961 50 0 47.9004 0 45.3125V25ZM23.4375 32.8125C23.4375 30.7405 22.6144 28.7534 21.1493 27.2882C19.6841 25.8231 17.697 25 15.625 25C13.553 25 11.5659 25.8231 10.1007 27.2882C8.6356 28.7534 7.8125 30.7405 7.8125 32.8125C7.8125 34.8845 8.6356 36.8716 10.1007 38.3368C11.5659 39.8019 13.553 40.625 15.625 40.625C17.697 40.625 19.6841 39.8019 21.1493 38.3368C22.6144 36.8716 23.4375 34.8845 23.4375 32.8125ZM25 6.25C25 5.4212 25.3292 4.62634 25.9153 4.04029C26.5013 3.45424 27.2962 3.125 28.125 3.125C28.9538 3.125 29.7487 3.45424 30.3347 4.04029C30.9208 4.62634 31.25 5.4212 31.25 6.25C31.25 7.0788 30.9208 7.87366 30.3347 8.45971C29.7487 9.04576 28.9538 9.375 28.125 9.375C27.2962 9.375 26.5013 9.04576 25.9153 8.45971C25.3292 7.87366 25 7.0788 25 6.25ZM37.5 3.125C38.3288 3.125 39.1237 3.45424 39.7097 4.04029C40.2958 4.62634 40.625 5.4212 40.625 6.25C40.625 7.0788 40.2958 7.87366 39.7097 8.45971C39.1237 9.04576 38.3288 9.375 37.5 9.375C36.6712 9.375 35.8763 9.04576 35.2903 8.45971C34.7042 7.87366 34.375 7.0788 34.375 6.25C34.375 5.4212 34.7042 4.62634 35.2903 4.04029C35.8763 3.45424 36.6712 3.125 37.5 3.125ZM43.75 6.25C43.75 5.4212 44.0792 4.62634 44.6653 4.04029C45.2513 3.45424 46.0462 3.125 46.875 3.125C47.7038 3.125 48.4987 3.45424 49.0847 4.04029C49.6708 4.62634 50 5.4212 50 6.25C50 7.0788 49.6708 7.87366 49.0847 8.45971C48.4987 9.04576 47.7038 9.375 46.875 9.375C46.0462 9.375 45.2513 9.04576 44.6653 8.45971C44.0792 7.87366 43.75 7.0788 43.75 6.25ZM46.875 12.5C47.7038 12.5 48.4987 12.8292 49.0847 13.4153C49.6708 14.0013 50 14.7962 50 15.625C50 16.4538 49.6708 17.2487 49.0847 17.8347C48.4987 18.4208 47.7038 18.75 46.875 18.75C46.0462 18.75 45.2513 18.4208 44.6653 17.8347C44.0792 17.2487 43.75 16.4538 43.75 15.625C43.75 14.7962 44.0792 14.0013 44.6653 13.4153C45.2513 12.8292 46.0462 12.5 46.875 12.5ZM43.75 25C43.75 24.1712 44.0792 23.3763 44.6653 22.7903C45.2513 22.2042 46.0462 21.875 46.875 21.875C47.7038 21.875 48.4987 22.2042 49.0847 22.7903C49.6708 23.3763 50 24.1712 50 25C50 25.8288 49.6708 26.6237 49.0847 27.2097C48.4987 27.7958 47.7038 28.125 46.875 28.125C46.0462 28.125 45.2513 27.7958 44.6653 27.2097C44.0792 26.6237 43.75 25.8288 43.75 25ZM37.5 12.5C38.3288 12.5 39.1237 12.8292 39.7097 13.4153C40.2958 14.0013 40.625 14.7962 40.625 15.625C40.625 16.4538 40.2958 17.2487 39.7097 17.8347C39.1237 18.4208 38.3288 18.75 37.5 18.75C36.6712 18.75 35.8763 18.4208 35.2903 17.8347C34.7042 17.2487 34.375 16.4538 34.375 15.625C34.375 14.7962 34.7042 14.0013 35.2903 13.4153C35.8763 12.8292 36.6712 12.5 37.5 12.5Z"
                        fill="" />
                </svg>
                <p class="hidden tablet:block tablet:py-10">МойНеСам</p>
            </a>
        </div>
    </header>

    <main class="mt-20 tablet:mt-30 desktop:mt-50 flex flex-col">
        <div class="hidden duration-300 backdrop-blur-sm m-auto flex z-10 absolute p-20 inset-0" id="warning">
            <div class="m-auto flex gap-30 flex-col bg-bg py-30 px-15">
                <p class="bg-[#00000000] py-0">Данная почта уже зарегистрированна! Введите другую или войдите в систему:</p>
                <a href="./sign-in.html" class="text-accent duration-300 active:text-main">войти</a>
                <span id="otherEmail" class="block cursor-pointer active:text-main text-accent">другая почта</span>
            </div>
        </div>

        <div class="hidden duration-300 backdrop-blur-sm m-auto flex z-10 absolute p-20 inset-0" id="warningLogin">
            <div class="m-auto flex gap-30 flex-col bg-bg py-30 px-15">
                <p class="bg-[#00000000] py-0">данный login уже существует, введите другой</p>
            </div>
        </div>

        <div class="hidden duration-300 backdrop-blur-sm m-auto flex z-10 absolute p-20 inset-0" id="warningPass">
            <div class="m-auto flex gap-30 flex-col bg-bg py-30 px-15">
                <p class="bg-[#00000000] py-0">пароли должны совпадать!</p>
            </div>
        </div>
        <form name="signIntForm" method="post"
                class="py-20 px-10 gap-10 tablet:py-50 tablet:px-25 tablet:gap-20 desktop:gap-25 bg-bg rounded-5 flex flex-col">
                
                <label
                    class="desktop:flex-row desktop:items-center flex flex-col col-span-1 rounded-5 outline outline-1 outline-main py-20 px-15 gap-20 text-accent focus-within:outline-2">
                    login:
                    <input type="text" maxlength="50" required
                        class="bg-bg focus:outline-none text-main"
                        name="login" placeholder="Ваш login">
                </label>

                <label
                    class="desktop:flex-row desktop:items-center flex flex-col col-span-1 rounded-5 outline outline-1 outline-main py-20 px-15 gap-20 text-accent focus-within:outline-2">
                    пароль:
                    <input type="password" minlength="8" maxlength="25" required
                        class="bg-bg focus:outline-none text-main"
                        name="password" placeholder="Ваш ***">
                </label>

                <label
                    class="desktop:flex-row desktop:items-center flex flex-col col-span-1 rounded-5 outline outline-1 outline-main py-20 px-15 gap-20 text-accent focus-within:outline-2">
                    пароль (повтор):
                    <input type="password" required
                        class="bg-bg focus:outline-none text-main"
                        name="passwordAgain" placeholder="Ваш *** ещё раз">
                </label>
                
                <label
                    class="desktop:flex-row desktop:items-center flex flex-col col-span-1 rounded-5 outline outline-1 outline-main py-20 px-15 gap-20 text-accent focus-within:outline-2">
                    телефон:
                    <input type="tel" required
                        class="bg-bg focus:outline-none text-main"
                        name="tel" placeholder="+7 (000) 000-00-00">
                </label>

                <label
                    class="desktop:flex-row desktop:items-center flex flex-col col-span-1 rounded-5 outline outline-1 outline-main py-20 px-15 gap-20 text-accent focus-within:outline-2">
                    почта:
                    <input type="email" required
                        class="bg-bg focus:outline-none text-main"
                        name="email" placeholder="address@gmail.com">
                </label>

                <button class="btn w-fit mx-auto mt-20 col-span-2">Создать аккаунт</button>
            </form>
    </main>

    <script src="https://unpkg.com/imask"></script>
    <script>
        const phoneInput = document.body.querySelector('input[type="tel"]');
        let phoneMask = IMask(phoneInput, {
        mask: '+{7} (000) 000-00-00'
        });
    </script>
    <script type="module">
        import setUser from '../../js/setUser.js';

        document.forms[0].onsubmit = async function(event) {
            event.preventDefault();
            if (this.password.value === this.passwordAgain.value) {
                await setUser(this);
                location.assign('./sign-in.html');
            } else {
                const warningPass = document.body.querySelector('#warningPass');
                await new Promise( (resolve) => {
                    setTimeout(resolve, 300);
                });
                warningPass.classList.toggle('hidden');
                await new Promise( (resolve) => {
                    setTimeout(resolve, 1000);
                });
                warningPass.classList.toggle('hidden');
            }
        };

        const warning = document.body.querySelector('#warning');
        const otherEmail = document.body.querySelector('#otherEmail');
        otherEmail.onclick = function() {
            warning.classList.toggle('hidden');
        }
    </script>
</body>
</html>